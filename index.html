<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <title>Lagos (Portugalia) — interaktywna mapa atrakcji dla ekipy 8 osób</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <style>
    html, body { height: 100%; margin: 0; }
    #map { height: 100vh; width: 100%; }
    .legend {
      position: absolute; top: 10px; left: 10px; z-index: 1000;
      background: #fff; border: 1px solid #ccc; border-radius: 8px;
      padding: 8px 10px; box-shadow: 0 2px 8px rgba(0,0,0,.1);
      font: 14px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .legend label { display: block; margin: 4px 0; cursor: pointer; }
    .popup h3 { margin: 0 0 6px; font-size: 16px; }
    .popup p { margin: 4px 0; }
    .popup a { text-decoration: none; }
    .tag { display:inline-block; font-size:12px; padding:2px 6px; border-radius:999px; background:#f3f4f6; margin-left:6px; }
    .credit { position:absolute; bottom:10px; left:10px; z-index:1000; background:#fff; border:1px solid #e5e7eb; border-radius:8px; padding:6px 8px; font-size:12px; color:#374151;}
  </style>
</head>
<body>
  <div id="map"></div>
  <div class="legend" id="legend">
    <strong>Filtry</strong>
    <label><input type="checkbox" data-layer="beach" checked> Plaże</label>
    <label><input type="checkbox" data-layer="adventure" checked> Woda & adrenalina</label>
    <label><input type="checkbox" data-layer="culture" checked> Zwiedzanie & historia</label>
    <label><input type="checkbox" data-layer="nightlife" checked> Nocne życie</label>
  </div>
  <div class="credit">Źródło mapy: © OpenStreetMap, Leaflet</div>

  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>
  <script>
    // Inicjalizacja mapy
    const map = L.map('map').setView([37.1028, -8.6727], 14);

    // Warstwa kafelków
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    // Grupy warstw
    const groups = {
      beach: L.layerGroup().addTo(map),
      adventure: L.layerGroup().addTo(map),
      culture: L.layerGroup().addTo(map),
      nightlife: L.layerGroup().addTo(map),
    };

    // Dane punktów (nazwa, opis, linki, "dlaczego", kategoria i współrzędne)
    const spots = [
      {
        name: "Ponta da Piedade (klifowy labirynt + latarnia)",
        lat: 37.08062, lng: -8.66942, cat: "adventure",
        desc: "Najsłynniejsze klify Algarve: łuki skalne, groty, punkty widokowe i drewniane kładki.",
        links: [
          {label:"Info (przewodnik)", url:"https://www.lagosportugalguide.com/lagos-algarve/ponta-da-piedade-lagos.html"},
          {label:"Mapa", url:"https://mapcarta.com/W55432710"}
        ],
        why: "Mocny efekt WOW + trasy piesze i świetny punkt startowy do kajaków/łodzi."
      },
      {
        name: "Praia do Camilo",
        lat: 37.08733, lng: -8.66843, cat: "beach",
        desc: "Ikoniczna plaża ze stromymi schodami, turkusową wodą i fotogenicznymi formacjami.",
        links: [
          {label:"Opis (blog)", url:"https://www.zigzagonearth.com/praia-camilo-beach-lagos-portugal/"},
          {label:"Mapa/koordy", url:"https://mapcarta.com/33030320"}
        ],
        why: "Świetne zdjęcia, zejście „na nogach pali”, klimat przygody w miejskim zasięgu."
      },
      {
        name: "Praia de Dona Ana",
        lat: 37.091427, lng: -8.669362, cat: "beach",
        desc: "Duża, osłonięta plaża między Pinhão i Camilo — złote klify i łatwy dostęp.",
        links: [
          {label:"Info + GPS", url:"https://www.lagosportugalguide.com/lagos-algarve/Praia-Dona-Ana-lagos.html"}
        ],
        why: "Bezpieczna baza wypadowa dla większej grupy; w sezonie dostępne wypożyczenia."
      },
      {
        name: "Praia da Batata (start kajaków/SUP)",
        lat: 37.0977806, lng: -8.6684444, cat: "adventure",
        desc: "Plaża u ujścia rzeki Bensafrim — częsty punkt startu wycieczek kajakowych do grot.",
        links: [
          {label:"Info (turystyczne)", url:"https://www.lagosportugalguide.com/lagos-algarve/Praia-da-Batata-lagos.html"},
          {label:"Oficjalnie (koory)", url:"https://visitalgarve.pt/en/equipamento/8725/praia-da-batata"}
        ],
        why: "Idealna, by całą ekipą wsiąść w kajaki/SUP i „przepłynąć” klify pod Piedade."
      },
      {
        name: "Meia Praia (sporty wodne)",
        lat: 37.1106944, lng: -8.659675, cat: "adventure",
        desc: "4-kilometrowy, wietrzny łuk piasku — świetny na kitesurf, żagle i gry zespołowe na plaży.",
        links: [
          {label:"Koordy", url:"https://euroveloportugal.com/en/poi/meia-praia-2"},
          {label:"Więcej o plaży", url:"https://en.wikipedia.org/wiki/Meia_Praia"}
        ],
        why: "Ogrom przestrzeni = luz dla 8 osób, łatwo zorganizować aktywności i wypożyczenia."
      },
      {
        name: "Praia do Porto de Mós (surf)",
        lat: 37.085000, lng: -8.687778, cat: "adventure",
        desc: "Szeroka plaża na zachód od centrum, ekspozycja na fale — popularna dla surfujących.",
        links: [
          {label:"Opis/położenie", url:"https://www.beachrex.com/en/portugal/faro/lagos-beaches/praia-do-porto-de-mos"}
        ],
        why: "Opcja „aktywnie”: lekcje surfingu dla całej grupy lub free-surf przy sprzyjającej fali."
      },
      {
        name: "Marina de Lagos — brama „Passeios de Barco” (rejsy/delfiny/groty)",
        lat: 37.108619, lng: -8.673139, cat: "adventure",
        desc: "Główny punkt zbiórki na rejsy do grot Ponta da Piedade oraz wyprawy na delfiny.",
        links: [
          {label:"Punkt zbiórki + GPS", url:"https://theabroadguide.com/from-lagos-2-5-hour-guided-coastal-boat-tour-grotto-visit/"},
          {label:"Operator (przykład)", url:"https://bluefleet.pt/en/lagos-portugal-tourist-information/"}
        ],
        why: "Łatwe zebranie 8 osób, szybka logistyka, rejsy to „pewniak” przygody."
      },
      {
        name: "Forte da Ponta da Bandeira (XVII w.)",
        lat: 37.099050, lng: -8.668270, cat: "culture",
        desc: "Fort u wejścia do portu — widoki na ujście i Batatę; mały „muzealny” przystanek.",
        links: [
          {label:"Opis + koordy", url:"https://en.wikipedia.org/wiki/Fort_of_Ponta_da_Bandeira"},
          {label:"Oficjalny opis", url:"https://www.visitportugal.com/en/node/136430"}
        ],
        why: "Szybki wtręt historyczny między wodnymi atrakcjami; fajny punkt foto."
      },
      {
        name: "Parque Aventura Lagos (park linowy + paintball)",
        lat: 37.1166859, lng: -8.6575933, cat: "adventure",
        desc: "Zestaw tras w koronach drzew i paintball — adrenalina na lądzie w pobliżu Meia Praia.",
        links: [
          {label:"Strona", url:"https://parqueaventura.net/lagos/"},
          {label:"Położenie/koory", url:"https://mytripalgarve.com/place/parque-aventura-lagos/"}
        ],
        why: "Świetne „team-bonding”, konkurencje na czas i tryb gry zespołowej dla 8 osób."
      },
      {
        name: "Lagos Divers (centrum nurkowe)",
        lat: 37.10646, lng: -8.67502, cat: "adventure",
        desc: "Centrum nurkowe przy Rua Vítor Costa e Silva — kursy i nurkowania w okolicy Lagos.",
        links: [
          {label:"Info/kontakt", url:"https://www.zentacle.com/Shop.aspx?CountryId=196&StateId=185&CityId=1872&OrganizationId=16594"},
          {label:"Ulica/położenie", url:"https://mapcarta.com/W800176049"}
        ],
        why: "Dla ekip spragnionych „głębszych” wrażeń — możliwość zrobienia wspólnego intro-dive."
      },
      {
        name: "Rua 25 de Abril (bar-street / pub crawl)",
        lat: 37.10181, lng: -8.67214, cat: "nightlife",
        desc: "Główna ulica nocnego życia Lagos — rząd barów/klubów, muzyka na żywo, drinki.",
        links: [
          {label:"Przewodnik nocny", url:"https://www.hotels.com/go/portugal/best-nightlife-lagos"},
          {label:"Przykładowy bar", url:"https://www.bonvivantbarinlagos.com/"}
        ],
        why: "Po całym dniu aktywności — idealna trasa na bar-hopping dla większej ekipy."
      },
      {
        name: "Praia do Pinhão (mała „instagramowa” zatoczka)",
        lat: 37.094419, lng: -8.668249, cat: "beach",
        desc: "Niewielka dzika plaża ze schodkami i widokowym klifem — blisko Dona Ana.",
        links: [
          {label:"Koordy + mapa", url:"https://www.playocean.net/en/portugal/lagos/beaches/praia-do-pinhao-beach"},
          {label:"Alternatywne źródło", url:"https://euroveloportugal.com/en/poi/praia-do-pinhao-2"}
        ],
        why: "Szybki wypad na zdjęcia/odpoczynek między bardziej intensywnymi aktywnościami."
      }
    ];

    // Dodaj markery
    const bounds = [];
    spots.forEach(s => {
      const popupHtml = `
        <div class="popup">
          <h3>${s.name} <span class="tag">${({beach:"Plaża", adventure:"Woda & adrenalina", culture:"Zwiedzanie", nightlife:"Nocne życie"})[s.cat]}</span></h3>
          <p>${s.desc}</p>
          <p><strong>Dlaczego na mapie:</strong> ${s.why}</p>
          <p>${s.links.map(l => `• <a href="${l.url}" target="_blank" rel="noopener">${l.label}</a>`).join("<br/>")}</p>
          <p style="font-size:12px;color:#6b7280;margin-top:6px">GPS: ${s.lat.toFixed(6)}, ${s.lng.toFixed(6)}</p>
        </div>
      `;
      const marker = L.marker([s.lat, s.lng]).bindPopup(popupHtml);
      groups[s.cat].addLayer(marker);
      bounds.push([s.lat, s.lng]);
    });

    // Fit do wszystkich punktów
    if (bounds.length) {
      map.fitBounds(bounds, { padding: [20, 20] });
    }

    // Prosty filtr warstw
    document.querySelectorAll('#legend input[type="checkbox"]').forEach(cb => {
      cb.addEventListener('change', e => {
        const layerKey = e.target.getAttribute('data-layer');
        if (e.target.checked) {
          groups[layerKey].addTo(map);
        } else {
          map.removeLayer(groups[layerKey]);
        }
      });
    });

    // Skala
    L.control.scale({imperial:false}).addTo(map);
  </script>
</body>
</html>
<script>
// --- NOWE ATRAKCJE: LIZBONA + ALJEZUR ---
// jeśli masz już window.spots z Lagos, to poniżej je do niej dopniemy:
const lisbonAndAljezurSpots = [
  // ====== LIZBONA ======
  {
    city: "Lizbona",
    category: "Nocne życie",
    name: "Bairro Alto (dzielnica barów)",
    lat: 38.712753, lng: -9.146295,
    desc: "Klubowo-barowe centrum nocnej Lizbony; gęsto od pubów, fado i rooftopów.",
    why: "Świetny start na wieczór dla 8-os. ekipy – masa lokali drzwi w drzwi.",
    link: "https://www.latlong.net/place/bairro-alto-lisbon-portugal-25126.html"
  },
  {
    city: "Lizbona",
    category: "Nocne życie",
    name: "Pink Street (Rua Nova do Carvalho)",
    lat: 38.7072892, lng: -9.1438142,
    desc: "Słynna „różowa ulica” w Cais do Sodré – kluby, bary, zdjęcia.",
    why: "Kompaktowa strefa klubów; łatwo utrzymać grupę razem.",
    link: "https://www.lisbonportugaltourism.com/pl/lizbona/atrakcje/pink-street.html"
  },
  {
    city: "Lizbona",
    category: "Nocne życie",
    name: "Time Out Market (Mercado da Ribeira)",
    lat: 38.70709, lng: -9.1459,
    desc: "Ogromna hala gastro z najlepszymi stoiskami i barami w mieście.",
    why: "Wygodne karmienie dużej ekipy – każdy znajdzie coś dla siebie.",
    link: "https://www.timeoutmarket.com/lisboa/en/"
  },
  {
    city: "Lizbona",
    category: "Nocne życie",
    name: "LX Factory",
    lat: 38.703511, lng: -9.17882,
    desc: "Postindustrialny kompleks: bary, street-food, koncerty, galerie.",
    why: "Klimatyczna miejscówka na wieczór + dużo przestrzeni dla grupy.",
    link: "https://lxfactory.com/en/"
  },
  {
    city: "Lizbona",
    category: "Woda & adrenalina",
    name: "Rejs/sunset na Tagu – Doca de Santo Amaro (Gate 3)",
    lat: 38.69968, lng: -9.17605,
    desc: "Miejsce zbiórki na rejsy i zachodowe cruise’y pod mostem 25 de Abril.",
    why: "Wspólna łódź = integracja + widoki + opcja open-bar u operatorów.",
    link: "https://www.lisbonbyboat.com/meeting-point"
  },
  {
    city: "Lizbona",
    category: "Woda & adrenalina",
    name: "Pilar 7 – 25 de Abril Bridge Experience",
    lat: 38.699909, lng: -9.179541,
    desc: "Szklana platforma na filarze mostu 25 de Abril – hardcore’owy widok.",
    why: "Dreszczyk i świetne foty dla „poszukiwaczy wrażeń”.",
    link: "https://www.experienciapilar7.pt/en"
  },
  {
    city: "Lizbona",
    category: "Zwiedzanie & historia",
    name: "Torre de Belém",
    lat: 38.691586, lng: -9.215977,
    desc: "Ikoniczna wieża u ujścia Tagu; symbol epoki wielkich odkryć.",
    why: "Obowiązkowy punkt „must-see” – blisko innych atrakcji Belém.",
    link: "https://www.latlong.net/place/the-belem-tower-lisbon-portugal-23126.html"
  },
  {
    city: "Lizbona",
    category: "Zwiedzanie & historia",
    name: "Castelo de São Jorge",
    lat: 38.713909, lng: -9.133476,
    desc: "Średniowieczny zamek z panoramą na Alfamę i rzekę.",
    why: "Łączy historię z widokami – dobry „dzienny” kontrast do nocnego życia.",
    link: "https://www.latlong.net/place/s-o-jorge-castle-lisbon-portugal-23127.html"
  },
  {
    city: "Lizbona",
    category: "Zwiedzanie & historia",
    name: "Miradouro da Senhora do Monte (punkt widokowy)",
    lat: 38.719186, lng: -9.132839,
    desc: "Jeden z najwyższych punktów widokowych; zachód słońca nad Lizboną.",
    why: "Szybka, bezpłatna „wow-miejscówka” dla całej ekipy.",
    link: "https://elevation.maplogs.com/poi/nossa_senhora_do_monte_belvedere_largo_monte_lisboa_portugal.321312.html"
  },
  {
    city: "Lizbona",
    category: "Woda & adrenalina",
    name: "Costa da Caparica – Praia do CDS (surf)",
    lat: 38.645149, lng: -9.241793,
    desc: "Szeroka plaża surfowa na południe od mostu; spoty i szkoły surfingu.",
    why: "Łatwy dojazd z centrum + fale odpowiednie dla różnych poziomów.",
    link: "https://www.blueflag.global/awarded-sites/cds"
  },
  // ====== ALJEZUR ======
  {
    city: "Aljezur",
    category: "Plaże",
    name: "Praia da Arrifana",
    lat: 37.29206, lng: -8.86546,
    desc: "Słynna zatoka z klifami i „igłą” Pedra da Agulha; świetny surf.",
    why: "Stabilny wybór na fale + dramatyczne klify = maksimum frajdy.",
    link: "https://mapcarta.com/16888602"
  },
  {
    city: "Aljezur",
    category: "Plaże",
    name: "Praia de Monte Clérigo",
    lat: 37.3403611, lng: -8.8540361,
    desc: "Długa, dzika plaża z knajpkami; dobre warunki dla surferów.",
    why: "Mniej tłumów niż Arrifana; łatwo ogarnąć większą ekipę.",
    link: "https://en.wikipedia.org/wiki/Praia_de_Monte_Cl%C3%A9rigo"
  },
  {
    city: "Aljezur",
    category: "Plaże",
    name: "Praia da Amoreira (ujście rzeki)",
    lat: 37.35139, lng: -8.84444,
    desc: "Plaża + laguna rzeki – można pływać, pływać na deskach, chillować.",
    why: "Świetna alternatywa przy dużym wietrze/bałwanie na oceanie.",
    link: "https://en.wikipedia.org/wiki/Praia_da_Amoreira"
  },
  {
    city: "Aljezur",
    category: "Zwiedzanie & historia",
    name: "Castelo de Aljezur",
    lat: 37.316442, lng: -8.805352,
    desc: "Ruiny zamku na wzgórzu z panoramicznym widokiem na dolinę.",
    why: "Krótki „hike” + historia; dobry przystanek między plażami.",
    link: "https://euroveloportugal.com/en/poi/castelo-de-aljezur-aljezur-castle"
  },
  {
    city: "Aljezur",
    category: "Zwiedzanie & historia",
    name: "Ribat da Arrifana / Ponta da Atalaia (clifftop)",
    lat: 37.32098, lng: -8.87717,
    desc: "Ruiny średniowiecznego ribatu na cyplu; epickie klify i zachody.",
    why: "Krótki trekking, zero tłumów, widoki „koniec świata”.",
    link: "https://mapcarta.com/N367674624"
  },
  {
    city: "Aljezur",
    category: "Plaże",
    name: "Praia de Odeceixe",
    lat: 37.440833, lng: -8.798333,
    desc: "Unikalna plaża u ujścia Rio de Seixe; rzeka + ocean w jednym.",
    why: "Opcja plażowania w rzece (cieplej) i w oceanie – idealne na grupę.",
    link: "https://www.beachrex.com/en/portugal/algarve/odeceixe-beaches/praia-de-odeceixe-mar"
  },
  {
    city: "Aljezur",
    category: "Plaże",
    name: "Praia do Canal",
    lat: 37.2702194, lng: -8.8601778,
    desc: "Dzika, kamienista zatoka tuż na południe od Arrifany; surfing & wędki.",
    why: "Ucieczka od tłumów; surowy klimat i „pusty horyzont”.",
    link: "https://euroveloportugal.com/en/poi/canal-beach"
  },
  {
    city: "Aljezur",
    category: "Plaże",
    name: "Praia da Bordeira (Carrapateira)",
    lat: 37.1974167, lng: -8.9031417,
    desc: "Ogromna, ponad 3-km plaża z wydmami i kładkami widokowymi.",
    why: "Mega przestrzeń na gry/zabawy; spoty surfowe na różnych poziomach.",
    link: "https://euroveloportugal.com/en/poi/bordeira-beach"
  },
  {
    city: "Aljezur",
    category: "Plaże",
    name: "Praia do Amado (surf)",
    lat: 37.166935, lng: -8.902536,
    desc: "Kultowy spot surfowy; częste szkolenia i zawody.",
    why: "Pewne fale + duże parkingi = łatwa logistyka dla busa i ekipy.",
    link: "https://www.playocean.net/en/portugal/aljezur/beaches/praia-do-amado-beach"
  },
  {
    city: "Aljezur",
    category: "Woda & adrenalina",
    name: "Rota Vicentina – odcinek Ponta da Atalaia",
    lat: 37.321033, lng: -8.877207,
    desc: "Fragment Fishermen’s Trail z klifami i widokiem na Atlantyk.",
    why: "Szybki trekking „po emocje” między sesjami surfingu.",
    link: "https://www.alltrails.com/trail/portugal/faro/rota-vicentina-trilho-da-ponta-da-atalaia-via-caminho-dos-pescadores"
  }
];

// dopięcie do Twojej globalnej tablicy z punktami
if (window.spots && Array.isArray(window.spots)) {
  window.spots.push(...lisbonAndAljezurSpots);
} else {
  // jeśli nie masz jeszcze spots – utwórz
  window.spots = [...lisbonAndAljezurSpots];
}

// (opcjonalnie) jeśli masz filtr po miastach – dopisz nowe nazwy do UI:
if (window.__addCityFilterOptions) {
  window.__addCityFilterOptions(["Lizbona", "Aljezur"]);
}
</script>
